<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>V2Ray VPN Packages</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --secondary: #3a0ca3;
      --accent: #f72585;
      --light: #f8f9fa;
      --dark: #212529;
      --success: #4cc9f0;
      --card-bg: #ffffff;
      --gradient-start: #4361ee;
      --gradient-end: #3a0ca3;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --card-radius: 20px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      color: var(--light);
    }

    .container {
      max-width: 1200px;
      margin: 50px auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 15px;
      background: linear-gradient(to right, #00b4db, #0083b0);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: fadeInDown 1s ease;
      position: relative;
      display: inline-block;
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(to right, var(--accent), #00b4db);
      border-radius: 2px;
    }

    .subtitle {
      font-size: 1.2rem;
      color: #a8b2d1;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .package-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }

    .package-card {
      background: #1e2a3a;
      border-radius: var(--card-radius);
      padding: 30px 25px;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(50px);
      animation: fadeUp 0.8s forwards;
      display: flex;
      flex-direction: column;
      height: 100%;
      border: 1px solid #2d3746;
    }

    .package-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, #00b4db, #0083b0);
    }

    .popular-badge {
      position: absolute;
      top: 15px;
      right: -34px;
      background: var(--accent);
      color: white;
      padding: 5px 40px;
      font-size: 0.8rem;
      font-weight: bold;
      transform: rotate(45deg);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    /* Stagger effect */
    .package-card:nth-child(1) { animation-delay: 0.1s; }
    .package-card:nth-child(2) { animation-delay: 0.2s; }
    .package-card:nth-child(3) { animation-delay: 0.3s; }
    .package-card:nth-child(4) { animation-delay: 0.4s; }
    .package-card:nth-child(5) { animation-delay: 0.5s; }
    .package-card:nth-child(6) { animation-delay: 0.6s; }

    .package-card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      border-color: #00b4db;
    }

    .package-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 15px;
      color: #e2e8f0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .package-title i {
      color: #00b4db;
      font-size: 1.2rem;
    }

    .package-price {
      font-size: 2rem;
      font-weight: 800;
      color: #00b4db;
      margin-bottom: 20px;
      display: flex;
      align-items: baseline;
      gap: 5px;
    }

    .price-period {
      font-size: 1rem;
      font-weight: normal;
      color: #a8b2d1;
    }

    .package-features {
      flex-grow: 1;
      margin-bottom: 25px;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    ul li {
      margin: 12px 0;
      padding-left: 28px;
      position: relative;
      transition: transform 0.3s ease;
      color: #cbd5e0;
    }

    ul li:hover {
      transform: translateX(5px);
    }

    ul li::before {
      content: "âœ“";
      position: absolute;
      left: 0;
      color: #00b4db;
      font-weight: bold;
      width: 22px;
      height: 22px;
      background: rgba(0, 180, 219, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .package-cta {
      background: linear-gradient(to right, #00b4db, #0083b0);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: auto;
    }

    .package-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 180, 219, 0.3);
    }

    a.back-btn {
      display: block;
      text-align: center;
      margin: 60px auto 0;
      width: fit-content;
      padding: 14px 30px;
      background: #1e2a3a;
      color: #00b4db;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
      border: 1px solid #2d3746;
    }

    a.back-btn:hover {
      background: #00b4db;
      color: #1a1a2e;
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 180, 219, 0.2);
    }

    /* Animations */
    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: #1e2a3a;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      width: 90%;
      max-width: 500px;
      animation: modalFadeIn 0.5s ease;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid #2d3746;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #2d3746;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #a8b2d1;
    }

    .modal-close:hover {
      background: #00b4db;
      color: #1a1a2e;
      transform: rotate(90deg);
    }

    .modal-icon {
      font-size: 3rem;
      color: #00b4db;
      margin-bottom: 15px;
    }

    .modal h2 {
      margin-bottom: 20px;
      color: #e2e8f0;
      font-size: 1.8rem;
    }

    .selected-package {
      background: #2d3746;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      font-weight: 600;
      color: #e2e8f0;
    }

    /* Form Styles */
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #e2e8f0;
    }

    .form-group input, 
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #2d3746;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #2d3746;
      color: #e2e8f0;
    }

    .form-group input:focus, 
    .form-group select:focus {
      outline: none;
      border-color: #00b4db;
      box-shadow: 0 0 0 3px rgba(0, 180, 219, 0.1);
    }

    .provider-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .provider-option {
      display: flex;
      align-items: center;
      padding: 10px;
      border: 1px solid #2d3746;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #2d3746;
    }

    .provider-option:hover {
      border-color: #00b4db;
    }

    .provider-option.selected {
      border-color: #00b4db;
      background-color: rgba(0, 180, 219, 0.05);
    }

    .provider-option input {
      display: none;
    }

    .provider-option label {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
      cursor: pointer;
      width: 100%;
      color: #e2e8f0;
    }

    .provider-icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .airtel { background-color: #E60000; }
    .dialog { background-color: #FF6B00; }
    .mobitel { background-color: #0052CC; }
    .hutch { background-color: #800080; }

    .package-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .package-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 15px 10px;
      border: 1px solid #2d3746;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      background: #2d3746;
    }

    .package-option:hover {
      border-color: #00b4db;
    }

    .package-option.selected {
      border-color: #00b4db;
      background-color: rgba(0, 180, 219, 0.05);
    }

    .package-option input {
      display: none;
    }

    .package-option label {
      margin: 0;
      cursor: pointer;
      width: 100%;
      color: #e2e8f0;
    }

    .package-option .data-amount {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .package-option .data-price {
      font-size: 1rem;
      color: #00b4db;
      font-weight: 600;
    }

    .airtel-zero-packages {
      display: none;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px dashed #2d3746;
    }

    .airtel-zero-packages h3 {
      font-size: 1rem;
      margin-bottom: 10px;
      color: #E60000;
      text-align: center;
    }

    .modal button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      margin: 12px 0;
      padding: 14px;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      gap: 10px;
    }

    .submit-btn {
      background: linear-gradient(to right, #00b4db, #0083b0);
      color: white;
    }

    .submit-btn:hover {
      background: linear-gradient(to right, #0083b0, #006a8e);
      transform: translateY(-2px);
    }

    .close-btn {
      background: #2d3746;
      color: #a8b2d1;
    }

    .close-btn:hover {
      background: #3a4557;
      transform: translateY(-2px);
    }

    /* Confirmation Modal */
    .confirmation-modal {
      display: none;
      position: fixed;
      z-index: 1100;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }

    .confirmation-content {
      background: #1e2a3a;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      width: 90%;
      max-width: 450px;
      animation: modalFadeIn 0.5s ease;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border: 1px solid #2d3746;
    }

    .confirmation-icon {
      font-size: 4rem;
      color: #00b4db;
      margin-bottom: 20px;
    }

    .confirmation-details {
      background: #2d3746;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      text-align: left;
    }

    .confirmation-details p {
      margin: 8px 0;
      color: #e2e8f0;
    }

    /* Loading indicator */
    .loading {
      display: none;
      text-align: center;
      margin: 10px 0;
    }

    .loading-spinner {
      border: 4px solid #2d3746;
      border-top: 4px solid #00b4db;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Error message */
    .error-message {
      color: #f56565;
      background-color: rgba(245, 101, 101, 0.1);
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      display: none;
    }

    .selected-price-display {
      background: #2d3746;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      color: #00b4db;
    }

    /* API Configuration Section */
    .api-config {
      background: #2d3746;
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      border-left: 4px solid #00b4db;
    }

    .api-config h4 {
      margin-bottom: 10px;
      color: #00b4db;
    }

    .api-config input {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #3a4557;
      border-radius: 5px;
      background: #1e2a3a;
      color: #e2e8f0;
    }

    .test-sms-btn {
      background: #f72585;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .test-sms-btn:hover {
      background: #e11575;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.2rem;
      }
      
      .subtitle {
        font-size: 1rem;
        padding: 0 10px;
      }
      
      .package-grid {
        gap: 20px;
      }
      
      .package-card {
        padding: 20px;
      }
      
      .provider-options, .package-options {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        padding: 30px 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>V2Ray VPN Packages</h1>
      <p class="subtitle">Choose from our selection of high-performance V2Ray VPN packages designed to provide secure and fast internet access with excellent value.</p>
    </div>
    
    <div class="package-grid">
      <div class="package-card" data-package="Basic VPN">
        <div class="package-title"><i class="fas fa-shield-alt"></i> Basic VPN</div>
        <div class="package-price">$4.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>50GB Monthly Data</li>
            <li>Unlimited Bandwidth</li>
            <li>5 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>24/7 Support</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="package-card" data-package="Standard VPN">
        <div class="popular-badge">POPULAR</div>
        <div class="package-title"><i class="fas fa-shield-alt"></i> Standard VPN</div>
        <div class="package-price">$9.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>150GB Monthly Data</li>
            <li>Unlimited Bandwidth</li>
            <li>10 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>Priority Support</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="package-card" data-package="Pro VPN">
        <div class="package-title"><i class="fas fa-shield-alt"></i> Pro VPN</div>
        <div class="package-price">$14.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>300GB Monthly Data</li>
            <li>Unlimited Bandwidth</li>
            <li>15 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>Dedicated IP Option</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="package-card" data-package="Ultimate VPN">
        <div class="package-title"><i class="fas fa-crown"></i> Ultimate VPN</div>
        <div class="package-price">$24.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>Unlimited Monthly Data</li>
            <li>Unlimited Bandwidth</li>
            <li>20 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>Dedicated IP Included</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="package-card" data-package="Family VPN">
        <div class="package-title"><i class="fas fa-users"></i> Family VPN</div>
        <div class="package-price">$19.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>500GB Shared Data</li>
            <li>Unlimited Bandwidth</li>
            <li>25 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>Family Safety Features</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="package-card" data-package="Business VPN">
        <div class="package-title"><i class="fas fa-briefcase"></i> Business VPN</div>
        <div class="package-price">$49.99<span class="price-period">/month</span></div>
        <div class="package-features">
          <ul>
            <li>Unlimited Data</li>
            <li>Unlimited Bandwidth</li>
            <li>50 Simultaneous Devices</li>
            <li>Global Server Access</li>
            <li>Business Support</li>
          </ul>
        </div>
        <button class="package-cta">Select Plan <i class="fas fa-arrow-right"></i></button>
      </div>
    </div>
    
    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
  </div>

  <!-- Form Modal -->
  <div class="modal" id="formModal">
    <div class="modal-content">
      <div class="modal-close" id="formModalClose">
        <i class="fas fa-times"></i>
      </div>
      <div class="modal-icon">
        <i class="fas fa-file-alt"></i>
      </div>
      <h2>Complete Your VPN Selection</h2>
      <div class="selected-package" id="selectedPackageText">Basic VPN</div>
      
      <!-- API Configuration Section -->
      <div class="api-config">
        <h4><i class="fas fa-cog"></i> SMS Notification Setup</h4>
        <p>Configure your notify.lk settings to receive SMS notifications:</p>
        <input type="text" id="apiKey" placeholder="Q3PNxzYbBqEj6NLOMoVq" value="">
        <input type="text" id="phoneNumber" placeholder="94779272221" value="">
        <button class="test-sms-btn" id="testSmsBtn"><i class="fas fa-paper-plane"></i> Test SMS</button>
        <div id="testResult" style="margin-top: 10px; font-size: 0.9rem;"></div>
      </div>
      
      <form id="packageForm">
        <div class="form-group">
          <label for="customerName">Your Name</label>
          <input type="text" id="customerName" name="customerName" placeholder="Enter your full name" required>
        </div>
        
        <div class="form-group">
          <label for="customerEmail">Email Address</label>
          <input type="email" id="customerEmail" name="customerEmail" placeholder="Enter your email address" required>
        </div>
        
        <div class="form-group">
          <label for="customerPhone">Phone Number</label>
          <input type="tel" id="customerPhone" name="customerPhone" placeholder="Enter your phone number" required>
        </div>
        
        <div class="form-group">
          <label>Current Provider</label>
          <div class="provider-options">
            <div class="provider-option">
              <input type="radio" id="airtel" name="provider" value="Airtel">
              <label for="airtel">
                <div class="provider-icon airtel">A</div>
                Airtel
              </label>
            </div>
            <div class="provider-option">
              <input type="radio" id="dialog" name="provider" value="Dialog">
              <label for="dialog">
                <div class="provider-icon dialog">D</div>
                Dialog
              </label>
            </div>
            <div class="provider-option">
              <input type="radio" id="mobitel" name="provider" value="Mobitel">
              <label for="mobitel">
                <div class="provider-icon mobitel">M</div>
                Mobitel
              </label>
            </div>
            <div class="provider-option">
              <input type="radio" id="hutch" name="provider" value="Hutch">
              <label for="hutch">
                <div class="provider-icon hutch">H</div>
                Hutch
              </label>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label>Data Package</label>
          <div class="package-options">
            <div class="package-option" data-price="100">
              <input type="radio" id="package-50gb" name="dataPackage" value="50GB">
              <label for="package-50gb">
                <div class="data-amount">50GB</div>
                <div class="data-price">Rs 100/=</div>
              </label>
            </div>
            <div class="package-option" data-price="200">
              <input type="radio" id="package-100gb" name="dataPackage" value="100GB">
              <label for="package-100gb">
                <div class="data-amount">100GB</div>
                <div class="data-price">Rs 200/=</div>
              </label>
            </div>
            <div class="package-option" data-price="450">
              <input type="radio" id="package-unlimited" name="dataPackage" value="Unlimited">
              <label for="package-unlimited">
                <div class="data-amount">Unlimited</div>
                <div class="data-price">Rs 450/=</div>
              </label>
            </div>
          </div>
          
          <!-- Airtel Zero Packages (Hidden by default) -->
          <div class="airtel-zero-packages" id="airtelZeroPackages">
            <h3><i class="fas fa-star"></i> Airtel Zero Packages</h3>
            <div class="package-options">
              <div class="package-option" data-price="200">
                <input type="radio" id="airtel-50gb" name="dataPackage" value="Airtel Zero 50GB">
                <label for="airtel-50gb">
                  <div class="data-amount">50GB</div>
                  <div class="data-price">Rs 200/=</div>
                </label>
              </div>
              <div class="package-option" data-price="400">
                <input type="radio" id="airtel-100gb" name="dataPackage" value="Airtel Zero 100GB">
                <label for="airtel-100gb">
                  <div class="data-amount">100GB</div>
                  <div class="data-price">Rs 400/=</div>
                </label>
              </div>
              <div class="package-option" data-price="650">
                <input type="radio" id="airtel-unlimited" name="dataPackage" value="Airtel Zero Unlimited">
                <label for="airtel-unlimited">
                  <div class="data-amount">Unlimited</div>
                  <div class="data-price">Rs 650/=</div>
                </label>
              </div>
            </div>
          </div>
        </div>
        
        <input type="hidden" id="selectedPlan" name="selectedPlan" value="">
        <input type="hidden" id="selectedPrice" name="selectedPrice" value="">
        
        <div class="selected-price-display">
          <p>Selected Price: <span id="priceDisplay">Rs 0/=</span></p>
        </div>
        
        <div class="loading" id="formLoading">
          <div class="loading-spinner"></div>
          <p>Submitting your selection...</p>
        </div>
        
        <div class="error-message" id="formError">
          There was an error submitting your form. Please try again.
        </div>
        
        <button type="submit" class="submit-btn" id="submitBtn"><i class="fas fa-check"></i> Submit Selection</button>
        <button type="button" class="close-btn" id="formCloseBtn"><i class="fas fa-times"></i> Cancel</button>
      </form>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="confirmation-modal" id="confirmationModal">
    <div class="confirmation-content">
      <div class="confirmation-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2>VPN Selection Confirmed!</h2>
      <p>Thank you for selecting a V2Ray VPN package. Your details have been submitted successfully.</p>
      
      <div class="confirmation-details">
        <p><strong>Selected Plan:</strong> <span id="confPlan">Basic VPN</span></p>
        <p><strong>Data Package:</strong> <span id="confDataPackage">50GB</span></p>
        <p><strong>Price:</strong> <span id="confPrice">Rs 100/=</span></p>
        <p><strong>Name:</strong> <span id="confName">John Doe</span></p>
        <p><strong>Email:</strong> <span id="confEmail">john@example.com</span></p>
        <p><strong>Phone:</strong> <span id="confPhone">+1234567890</span></p>
        <p><strong>Current Provider:</strong> <span id="confProvider">Airtel</span></p>
      </div>
      
      <button class="submit-btn" id="confirmationCloseBtn"><i class="fas fa-check"></i> Great, Thank You!</button>
    </div>
  </div>

  <script>
    // Get modal elements
    const formModal = document.getElementById('formModal');
    const confirmationModal = document.getElementById('confirmationModal');
    const formModalClose = document.getElementById('formModalClose');
    const formCloseBtn = document.getElementById('formCloseBtn');
    const confirmationCloseBtn = document.getElementById('confirmationCloseBtn');
    const selectedPackageText = document.getElementById('selectedPackageText');
    const selectedPlanInput = document.getElementById('selectedPlan');
    const selectedPriceInput = document.getElementById('selectedPrice');
    const priceDisplay = document.getElementById('priceDisplay');
    const packageForm = document.getElementById('packageForm');
    const formLoading = document.getElementById('formLoading');
    const formError = document.getElementById('formError');
    const submitBtn = document.getElementById('submitBtn');
    const airtelZeroPackages = document.getElementById('airtelZeroPackages');
    const testSmsBtn = document.getElementById('testSmsBtn');
    const testResult = document.getElementById('testResult');
    const apiKeyInput = document.getElementById('apiKey');
    const phoneNumberInput = document.getElementById('phoneNumber');
    
    // Confirmation elements
    const confPlan = document.getElementById('confPlan');
    const confDataPackage = document.getElementById('confDataPackage');
    const confPrice = document.getElementById('confPrice');
    const confName = document.getElementById('confName');
    const confEmail = document.getElementById('confEmail');
    const confPhone = document.getElementById('confPhone');
    const confProvider = document.getElementById('confProvider');
    
    let selectedPackage = '';
    let selectedDataPackage = '';
    let selectedPrice = 0;

    // Load saved API settings from localStorage
    function loadApiSettings() {
      const savedApiKey = localStorage.getItem('notifyLkApiKey');
      const savedPhone = localStorage.getItem('notifyLkPhone');
      
      if (savedApiKey) apiKeyInput.value = savedApiKey;
      if (savedPhone) phoneNumberInput.value = savedPhone;
    }

    // Save API settings to localStorage
    function saveApiSettings() {
      localStorage.setItem('notifyLkApiKey', apiKeyInput.value);
      localStorage.setItem('notifyLkPhone', phoneNumberInput.value);
    }

    // Test SMS function
    testSmsBtn.addEventListener('click', async () => {
      const apiKey = apiKeyInput.value.trim();
      const phoneNumber = phoneNumberInput.value.trim();
      
      if (!apiKey || !phoneNumber) {
        testResult.innerHTML = '<span style="color: #f56565;">Please enter both API Key and Phone Number</span>';
        return;
      }
      
      testResult.innerHTML = '<span style="color: #00b4db;">Sending test SMS...</span>';
      
      try {
        const success = await sendSMSToNotifyLK({
          customerName: 'Test Customer',
          customerEmail: 'test@example.com',
          customerPhone: '123456789',
          provider: 'Test Provider',
          dataPackage: 'Test Package',
          selectedPlan: 'Test Plan',
          selectedPrice: '100'
        }, apiKey, phoneNumber, true);
        
        if (success) {
          testResult.innerHTML = '<span style="color: #4ade80;">Test SMS sent successfully!</span>';
          saveApiSettings();
        } else {
          testResult.innerHTML = '<span style="color: #f56565;">Failed to send test SMS. Check your API credentials.</span>';
        }
      } catch (error) {
        testResult.innerHTML = `<span style="color: #f56565;">Error: ${error.message}</span>`;
      }
    });

    // Add event listeners to package cards
    document.querySelectorAll('.package-card').forEach(card => {
      card.addEventListener('click', () => {
        selectedPackage = card.getAttribute('data-package');
        selectedPackageText.textContent = selectedPackage;
        selectedPlanInput.value = selectedPackage;
        formModal.style.display = 'flex';
        
        // Load saved API settings
        loadApiSettings();
        
        // Reset form
        packageForm.reset();
        document.querySelectorAll('.provider-option, .package-option').forEach(option => {
          option.classList.remove('selected');
        });
        
        // Reset price display
        priceDisplay.textContent = 'Rs 0/=';
        selectedPrice = 0;
        selectedPriceInput.value = '';
        
        // Hide Airtel Zero packages by default
        airtelZeroPackages.style.display = 'none';
        
        // Hide any previous error messages
        formError.style.display = 'none';
        testResult.innerHTML = '';
      });
    });

    // Provider and package option selection
    document.querySelectorAll('.provider-option, .package-option').forEach(option => {
      option.addEventListener('click', () => {
        // Remove selected class from all options in the same group
        const group = option.closest('.provider-options, .package-options');
        if (group) {
          group.querySelectorAll('.provider-option, .package-option').forEach(opt => {
            opt.classList.remove('selected');
          });
        }
        
        // Add selected class to clicked option
        option.classList.add('selected');
        
        // Check the radio button
        const radio = option.querySelector('input[type="radio"]');
        if (radio) {
          radio.checked = true;
          
          // If it's a provider option, check if it's Airtel
          if (radio.name === 'provider') {
            if (radio.value === 'Airtel') {
              airtelZeroPackages.style.display = 'block';
            } else {
              airtelZeroPackages.style.display = 'none';
              
              // If Airtel packages were selected, clear them
              document.querySelectorAll('#airtelZeroPackages input[type="radio"]').forEach(airtelRadio => {
                airtelRadio.checked = false;
              });
              document.querySelectorAll('#airtelZeroPackages .package-option').forEach(airtelOption => {
                airtelOption.classList.remove('selected');
              });
            }
          }
          
          // If it's a data package, update the price
          if (radio.name === 'dataPackage') {
            selectedDataPackage = radio.value;
            selectedPrice = option.getAttribute('data-price');
            selectedPriceInput.value = selectedPrice;
            priceDisplay.textContent = `Rs ${selectedPrice}/=`;
          }
        }
      });
    });

    // Form submission
    packageForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Get form values
      const name = document.getElementById('customerName').value;
      const email = document.getElementById('customerEmail').value;
      const phone = document.getElementById('customerPhone').value;
      const provider = document.querySelector('input[name="provider"]:checked');
      const dataPackage = document.querySelector('input[name="dataPackage"]:checked');
      
      // Validate form
      if (!name || !email || !phone || !provider || !dataPackage) {
        alert('Please fill in all fields before submitting.');
        return;
      }
      
      // Validate email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Please enter a valid email address.');
        return;
      }
      
      // Validate phone number (basic validation)
      const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
      if (!phoneRegex.test(phone.replace(/[\s\-\(\)]/g, ''))) {
        alert('Please enter a valid phone number.');
        return;
      }
      
      // Set confirmation details
      confPlan.textContent = selectedPackage;
      confDataPackage.textContent = dataPackage.value;
      confPrice.textContent = `Rs ${selectedPrice}/=`;
      confName.textContent = name;
      confEmail.textContent = email;
      confPhone.textContent = phone;
      confProvider.textContent = provider.value;
      
      // Show loading indicator
      submitBtn.style.display = 'none';
      formLoading.style.display = 'block';
      formError.style.display = 'none';
      
      try {
        // Get API credentials
        const apiKey = apiKeyInput.value.trim();
        const adminPhone = phoneNumberInput.value.trim();
        
        let smsSent = false;
        
        // Try to send SMS if credentials are provided
        if (apiKey && adminPhone) {
          smsSent = await sendSMSToNotifyLK({
            customerName: name,
            customerEmail: email,
            customerPhone: phone,
            provider: provider.value,
            dataPackage: dataPackage.value,
            selectedPlan: selectedPackage,
            selectedPrice: selectedPrice
          }, apiKey, adminPhone);
          
          if (smsSent) {
            console.log('SMS notification sent successfully');
          } else {
            console.log('SMS notification failed, but continuing...');
          }
        }
        
        // Save the submission locally as fallback
        saveSubmissionLocally({
          customerName: name,
          customerEmail: email,
          customerPhone: phone,
          provider: provider.value,
          dataPackage: dataPackage.value,
          selectedPlan: selectedPackage,
          selectedPrice: selectedPrice,
          timestamp: new Date().toISOString()
        });
        
        // Show success regardless of SMS status
        formModal.style.display = 'none';
        confirmationModal.style.display = 'flex';
        
      } catch (error) {
        console.error('Error:', error);
        formError.style.display = 'block';
        formError.textContent = `Error: ${error.message}. Your submission has been saved locally.`;
      } finally {
        // Hide loading indicator
        submitBtn.style.display = 'flex';
        formLoading.style.display = 'none';
      }
    });

    // notify.lk API integration
    async function sendSMSToNotifyLK(formData, apiKey, phoneNumber, isTest = false) {
      const NOTIFY_LK_API_KEY = apiKey || localStorage.getItem('notifyLkApiKey');
      const NOTIFY_LK_SENDER_ID = 'NotifyDEMO';
      const YOUR_PHONE_NUMBER = phoneNumber || localStorage.getItem('notifyLkPhone');
      
      if (!NOTIFY_LK_API_KEY || !YOUR_PHONE_NUMBER) {
        throw new Error('API Key or Phone Number not configured');
      }
      
      let message;
      
      if (isTest) {
        message = `Test SMS from V2Ray VPN Website\nTime: ${new Date().toLocaleString()}`;
      } else {
        message = `New VPN Order:
Plan: ${formData.selectedPlan}
Data: ${formData.dataPackage}
Price: Rs ${formData.selectedPrice}
Name: ${formData.customerName}
Email: ${formData.customerEmail}
Phone: ${formData.customerPhone}
Provider: ${formData.provider}
Time: ${new Date().toLocaleString()}`;
      }

      try {
        const response = await fetch('https://app.notify.lk/api/v1/send', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            user_id: NOTIFY_LK_API_KEY,
            api_key: NOTIFY_LK_API_KEY,
            sender_id: NOTIFY_LK_SENDER_ID,
            to: YOUR_PHONE_NUMBER,
            message: message
          })
        });
        
        const result = await response.json();
        console.log('SMS API Response:', result);
        
        if (result.status === 'success' || result.message === 'Message sent successfully') {
          return true;
        } else {
          throw new Error(result.message || 'Unknown error from notify.lk');
        }
      } catch (error) {
        console.error('SMS sending failed:', error);
        throw error;
      }
    }

    // Save submission to localStorage as fallback
    function saveSubmissionLocally(submission) {
      try {
        const submissions = JSON.parse(localStorage.getItem('vpnSubmissions') || '[]');
        submissions.push(submission);
        localStorage.setItem('vpnSubmissions', JSON.stringify(submissions));
        console.log('Submission saved locally:', submission);
      } catch (error) {
        console.error('Error saving submission locally:', error);
      }
    }

    // Close modals
    formModalClose.addEventListener('click', () => {
      formModal.style.display = 'none';
    });
    
    formCloseBtn.addEventListener('click', () => {
      formModal.style.display = 'none';
    });
    
    confirmationCloseBtn.addEventListener('click', () => {
      confirmationModal.style.display = 'none';
    });

    // Close modals when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target === formModal) {
        formModal.style.display = 'none';
      }
      if (e.target === confirmationModal) {
        confirmationModal.style.display = 'none';
      }
    });

    // Load API settings when page loads
    document.addEventListener('DOMContentLoaded', loadApiSettings);
  </script>
</body>
</html>